<head>
    <title>Golden Shark</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue-lazyload/vue-lazyload.js"></script>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/vuetify/dist/vuetify.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet">
    <link href="https://unpkg.com/vuetify/dist/vuetify.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>

<div id="thzapp">
    <v-app id="inspire">

        <v-toolbar height=128>
            <v-toolbar-items>
                <img src="/static/Shark.png" alt="logo-image">
            </v-toolbar-items>
        </v-toolbar>

        <v-container fluid grid-list-xl>
            <v-layout align-center>
                <v-flex xs12 sm8 offset-xs1>
                    <v-card>
                        <v-container fluid grid-list-md>
                            <v-layout row wrap>
                                <v-flex xs12 v-for="thz in message" :key="thz.code">
                                    <v-card>
                                        <img v-lazy="thz.imgf" width="100%">
                                        <v-card-title primary-title>
                                            <div>
                                                <h3 class="headline mb-0" v-text="thz.code"></h3>
                                                <br>
                                                <h3 class="headline mb-0" v-text="thz.text"></h3>
                                            </div>
                                        </v-card-title>
                                        <v-card-actions>
                                            <v-btn flat color="info" v-text="thz.name"></v-btn>
                                            <v-spacer></v-spacer>
                                            <v-btn color="success">Download</v-btn>
                                        </v-card-actions>
                                    </v-card>
                                </v-flex>
                            </v-layout>
                        </v-container>
                    </v-card>
                </v-flex>
            </v-layout>
        </v-container>

        <div class="text-xs-center">
            <v-pagination :length="pages" v-model="page" @input="next" :total-visible="10"></v-pagination>
        </div>

        <v-footer class="pa-3">
            <v-spacer></v-spacer>
            <div>&copy; {{ new Date().getFullYear() }}</div>
        </v-footer>

    </v-app>
</div>
<script>
    Vue.use(VueLazyload)
    var thzapp = new Vue({
        el: '#thzapp',
        data: {
            message: '',
            page: 1,
            pages: 0
        },
        mounted: function () {
            this.getJsonInfo()
        },
        created: function () {
            this.getTotalPages()
        },
        methods: {
            getJsonInfo: function () {
                axios.get('http://www.goldenshark.cf/thzdetails/1')
                    .then(function (response) {
                        this.message = response.data;
                    }.bind(this))
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            getTotalPages: function () {
                axios.get('http://www.goldenshark.cf/totalpages')
                    .then(function (response) {
                        this.pages = parseInt(response.data);
                    }.bind(this))
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            next(page) {
                axios.get('http://www.goldenshark.cf/thzdetails/' + str(page))
                    .then(function (response) {
                        this.message = response.data;
                    }.bind(this))
                    .catch(function (error) {
                        console.log(error);
                    });
            }
        }
    })
</script>